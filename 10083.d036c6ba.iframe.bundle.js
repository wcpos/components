(self.webpackChunk_wcpos_components=self.webpackChunk_wcpos_components||[]).push([[10083],{"./src/numpad/reducer.ts":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ACTIONS=void 0,exports.formatOperand=function formatOperand(operand){},exports.reducer=function reducer(state,action,config){var type=action.type,payload=action.payload,decimalSeparator=(null==config?void 0:config.decimalSeparator)||".",precision=(null==config?void 0:config.precision)||6;switch(type){case ACTIONS.ADD_DIGIT:return state.overwrite||payload.overwrite?Object.assign({},state,{currentOperand:payload.digit,overwrite:!1}):"0"===payload.digit&&"0"===state.currentOperand||payload.digit===decimalSeparator&&state.currentOperand&&state.currentOperand.includes(decimalSeparator)?state:payload.digit===decimalSeparator&&null==state.currentOperand?Object.assign({},state,{currentOperand:"0".concat(decimalSeparator)}):"0"===state.currentOperand?Object.assign({},state,{currentOperand:payload.digit}):Object.assign({},state,{currentOperand:"".concat(state.currentOperand||"").concat(payload.digit)});case ACTIONS.CHOOSE_OPERATION:return null==state.currentOperand&&null==state.previousOperand?state:null==state.currentOperand?Object.assign({},state,{operation:payload.operation}):null==state.previousOperand?Object.assign({},state,{operation:payload.operation,previousOperand:state.currentOperand,currentOperand:null}):Object.assign({},state,{previousOperand:evaluate(state,decimalSeparator,precision),operation:payload.operation,currentOperand:null});case ACTIONS.CLEAR:return{currentOperand:null,operation:null,overwrite:!1,previousOperand:null};case ACTIONS.DELETE_DIGIT:return state.overwrite?Object.assign({},state,{overwrite:!1,currentOperand:null}):null==state.currentOperand?state:1===state.currentOperand.length?Object.assign({},state,{currentOperand:null}):Object.assign({},state,{currentOperand:state.currentOperand.slice(0,-1)});case ACTIONS.EVALUATE:return null==state.operation||null==state.currentOperand||null==state.previousOperand?state:Object.assign({},state,{overwrite:!0,previousOperand:null,operation:null,currentOperand:evaluate(state,decimalSeparator,precision)});case ACTIONS.SWITCH_SIGN:return state.currentOperand&&"0"!==state.currentOperand?state.currentOperand.startsWith("-")?Object.assign({},state,{currentOperand:state.currentOperand.slice(1)}):Object.assign({},state,{currentOperand:"-".concat(state.currentOperand)}):state;case ACTIONS.APPLY_DISCOUNT:if(!state.currentOperand)return state;var discountMultiplier=(100-payload.discount)/100,discountedValue=round(parseFloat(state.currentOperand)*discountMultiplier,precision);return Object.assign({},state,{currentOperand:discountedValue,overwrite:!0});default:return state}};var ACTIONS=exports.ACTIONS={ADD_DIGIT:"add-digit",CHOOSE_OPERATION:"choose-operation",CLEAR:"clear",DELETE_DIGIT:"delete-digit",EVALUATE:"evaluate",SWITCH_SIGN:"switch-sign",APPLY_DISCOUNT:"apply-discount"};function round(value,precision){var multiplier=Math.pow(10,precision);return(Math.round(value*multiplier)/multiplier).toString()}function evaluate(state,decimalSeparator,precision){var _state$previousOperan,_state$currentOperand,prev=parseFloat((null==(_state$previousOperan=state.previousOperand)?void 0:_state$previousOperan.replace(decimalSeparator,"."))||""),current=parseFloat((null==(_state$currentOperand=state.currentOperand)?void 0:_state$currentOperand.replace(decimalSeparator,"."))||"");if(Number.isNaN(prev)||Number.isNaN(current))return"";var computation=0;switch(state.operation){case"+":computation=prev+current;break;case"-":computation=prev-current;break;case"*":computation=prev*current;break;case"รท":computation=prev/current}return round(computation,precision).replace(".",decimalSeparator)}}}]);